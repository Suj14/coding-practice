<!doctype html>
<html lang="ne">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>üíå Kaali ‡§ï‡•ã ‡§≤‡§æ‡§ó‡§ø</title>

  <style>
    :root{
      --bg1:#ff4d6d; --bg2:#ff9a8b; --bg3:#ffd6e0;
      --card:#ffffffee; --text:#1f1f1f;
    }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100vh; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
      color:var(--text);
      background: radial-gradient(circle at 20% 20%, var(--bg3), transparent 45%),
                  radial-gradient(circle at 80% 30%, #fff3, transparent 50%),
                  linear-gradient(135deg,var(--bg1),var(--bg2));
      overflow:hidden;
    }
    .wrap{
      position:relative;
      min-height:100vh;
      display:grid;
      place-items:center;
      padding:24px;
      z-index:2;
    }
    .card{
      width:min(720px, 92vw);
      background:var(--card);
      border:1px solid #fff6;
      border-radius:20px;
      padding:28px 22px;
      box-shadow:0 20px 60px #0003;
      text-align:center;
      backdrop-filter: blur(10px);
    }
    h1{margin:0 0 8px; font-size:clamp(24px,4vw,38px)}
    p{margin:10px 0; line-height:1.55; font-size:clamp(15px,2.1vw,18px)}
    .hint{opacity:.85}

    .btns{display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin-top:16px}
    button, a.btn{
      appearance:none; border:0; cursor:pointer;
      padding:12px 16px; border-radius:999px;
      font-weight:800; font-size:16px;
      background:#fff; color:#c1121f;
      box-shadow:0 10px 25px #0002;
      text-decoration:none;
      transition: transform .08s ease, box-shadow .2s ease;
    }
    button:hover, a.btn:hover{transform: translateY(-1px); box-shadow:0 14px 30px #00025}
    button:active, a.btn:active{transform: translateY(1px)}
    button:disabled{opacity:.6; cursor:not-allowed; transform:none}

    .reveal{
      margin-top:18px;
      padding:16px;
      border-radius:16px;
      border:1px dashed #c1121f55;
      background:#fff8;
      display:none;
      text-align:left;
    }
    .type{
      white-space:pre-wrap;
      font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      font-size:clamp(16px,2.2vw,19px);
    }
    .small{font-size:13px; opacity:.75; margin-top:14px}

    /* Floating hearts */
    .hearts{position:absolute; inset:0; z-index:1; pointer-events:none}
    .heart{
      position:absolute;
      width:14px; height:14px;
      background:#fff;
      transform: rotate(45deg);
      opacity:.75;
      animation: floatUp linear forwards;
      filter: drop-shadow(0 6px 10px #0002);
    }
    .heart:before, .heart:after{
      content:"";
      position:absolute;
      width:14px; height:14px;
      background:#fff;
      border-radius:50%;
    }
    .heart:before{left:-7px; top:0}
    .heart:after{left:0; top:-7px}
    @keyframes floatUp{
      from{ transform: translateY(0) rotate(45deg) scale(1); }
      to  { transform: translateY(-110vh) rotate(45deg) scale(1.35); opacity:0; }
    }

    /* Step badge */
    .badge{
      display:inline-block;
      padding:6px 12px;
      border-radius:999px;
      background:#ffffffaa;
      border:1px solid #0001;
      font-weight:800;
      font-size:13px;
      margin-bottom:10px;
    }

    /* ‚ÄúNo‚Äù button dodge */
    .dodge-area{position:relative; display:inline-block}
    #noBtn{position:relative}
  </style>
</head>

<body>
  <canvas id="confetti" style="position:absolute;inset:0;z-index:0;"></canvas>
  <div class="hearts" id="hearts"></div>

  <div class="wrap">
    <div class="card">
      <div class="badge" id="stepBadge">‡§∏‡§∞‡§™‡•ç‡§∞‡§æ‡§á‡§ú ‡•ß / ‡•©</div>
      <h1 id="title">üíå Kaali ‡§ï‡•ã ‡§≤‡§æ‡§ó‡§ø</h1>
      <p class="hint" id="subtitle">Kaale ko bau ‡§¨‡§æ‡§ü ‡§è‡§â‡§ü‡§æ ‡§∏‡§æ‡§®‡•ã ‡§∏‡§∞‡§™‡•ç‡§∞‡§æ‡§á‡§ú‚Ä¶</p>

      <div class="btns" id="btnRow">
        <button id="mainBtn">‡§Æ‡•á‡§∞‡•ã ‡§Æ‡§®‡§ï‡•ã ‡§ï‡•Å‡§∞‡§æ ‡§∏‡•Å‡§®‡•ç‡§® ‡§ö‡§æ‡§π‡§®‡•ç‡§õ‡•å ‡§≠‡§®‡•á ‡§Ø‡•ã ‡§¨‡§ü‡§® ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ó‡§∞ üíñ</button>
      </div>

      <div class="reveal" id="revealBox">
        <div class="type" id="typed"></div>
      </div>

      <div class="small">Made with ‚ù§Ô∏è by Kaale ko bau</div>
    </div>
  </div>

  <script>
    // Names
    const HER_NAME = "Kaali";
    const YOUR_NAME = "Kaale ko bau";

    // Confetti
    const canvas = document.getElementById("confetti");
    const ctx = canvas.getContext("2d");
    let W, H;
    const pieces = [];
    function resize(){ W=canvas.width=innerWidth; H=canvas.height=innerHeight; }
    addEventListener("resize", resize); resize();

    function popConfetti(count=180){
      pieces.length = 0;
      for(let i=0;i<count;i++){
        pieces.push({
          x: Math.random()*W,
          y: -20 - Math.random()*H*0.3,
          r: 2 + Math.random()*4,
          vx: -2 + Math.random()*4,
          vy: 2 + Math.random()*6,
          rot: Math.random()*Math.PI,
          vr: -0.2 + Math.random()*0.4,
          a: 1
        });
      }
      let t=0;
      (function anim(){
        t++;
        ctx.clearRect(0,0,W,H);
        for(const p of pieces){
          p.x += p.vx; p.y += p.vy; p.rot += p.vr;
          p.vy += 0.02;
          p.a *= 0.995;
          ctx.save();
          ctx.globalAlpha = p.a;
          ctx.translate(p.x,p.y);
          ctx.rotate(p.rot);
          ctx.fillRect(-p.r, -p.r, p.r*2.4, p.r*2.4);
          ctx.restore();
        }
        if(t<260) requestAnimationFrame(anim);
        else ctx.clearRect(0,0,W,H);
      })();
    }

    // Floating hearts
    const hearts = document.getElementById("hearts");
    function spawnHeart(){
      const h = document.createElement("div");
      h.className = "heart";
      const left = Math.random()*100;
      const dur = 5 + Math.random()*6;
      const size = 8 + Math.random()*16;
      h.style.left = left + "vw";
      h.style.bottom = (-10 - Math.random()*20) + "vh";
      h.style.animationDuration = dur + "s";
      h.style.width = h.style.height = size + "px";
      hearts.appendChild(h);
      setTimeout(()=>h.remove(), dur*1000);
    }
    setInterval(spawnHeart, 260);

    // Typewriter
    const revealBox = document.getElementById("revealBox");
    const typed = document.getElementById("typed");
    function typeText(text, done){
      revealBox.style.display = "block";
      typed.textContent = "";
      let i = 0;
      const speed = 20;
      const timer = setInterval(()=>{
        typed.textContent += text[i++] ?? "";
        if(i > text.length){
          clearInterval(timer);
          if(done) done();
        }
      }, speed);
    }

    // Steps (3 surprises)
    let step = 1;
    const stepBadge = document.getElementById("stepBadge");
    const subtitle = document.getElementById("subtitle");
    const btnRow = document.getElementById("btnRow");
    const mainBtn = document.getElementById("mainBtn");

    function setBadge(){
      stepBadge.textContent = `‡§∏‡§∞‡§™‡•ç‡§∞‡§æ‡§á‡§ú ${step} / ‡•©`;
    }

    function renderButtons(buttons){
      btnRow.innerHTML = "";
      buttons.forEach(b => btnRow.appendChild(b));
    }

    function makeButton(label, onClick){
      const btn = document.createElement("button");
      btn.textContent = label;
      btn.addEventListener("click", onClick);
      return btn;
    }

    function step1(){
      setBadge();
      subtitle.textContent = "‡§™‡§π‡§ø‡§≤‡•ã ‡§ï‡•Å‡§∞‡§æ‚Ä¶ ‡§Æ‡§®‡§¨‡§æ‡§ü ‚ù§Ô∏è";
      popConfetti();

      const msg =
`Kaali üíñ

‡§§‡§ø‡§Æ‡•Ä‡§≤‡§æ‡§à ‡§¶‡•á‡§ñ‡•ç‡§¶‡§æ ‡§Æ‡•á‡§∞‡•ã ‡§¶‡§ø‡§® ‡§Ü‡§´‡•à‡§Ç ‡§∞‡§æ‡§Æ‡•ç‡§∞‡•ã ‡§π‡•Å‡§®‡•ç‡§õ‡•§
‡§§‡§ø‡§Æ‡•Ä ‡§π‡§æ‡§Å‡§∏‡•ç‡§¶‡§æ‚Ä¶ ‡§Æ‡§® ‡§∂‡§æ‡§®‡•ç‡§§ ‡§π‡•Å‡§®‡•ç‡§õ‡•§
‡§∞ ‡§§‡§ø‡§Æ‡•Ä ‡§®‡§ú‡§ø‡§ï ‡§π‡•Å‡§Å‡§¶‡§æ‚Ä¶ ‡§∏‡§Ç‡§∏‡§æ‡§∞ ‡§Ö‡§≤‡§ø ‡§∏‡§ú‡§ø‡§≤‡•ã ‡§≤‡§æ‡§ó‡•ç‡§õ‡•§

‡§∏‡§æ‡§Å‡§ö‡•ã ‡§ï‡•Å‡§∞‡§æ ‡§ï‡•á ‡§π‡•ã ‡§≠‡§®‡•á‚Äî
‡§Æ ‡§§‡§ø‡§Æ‡•Ä‡§≤‡§æ‡§à ‡§ß‡•á‡§∞‡•à ‡§Æ‡§æ‡§Ø‡§æ ‡§ó‡§∞‡•ç‡§õ‡•Å‡•§`;

      typeText(msg, () => {
        renderButtons([
          makeButton("‡§Ö‡§∞‡•ç‡§ï‡•ã ‡§∏‡§∞‡§™‡•ç‡§∞‡§æ‡§á‡§ú ‡§ñ‡•ã‡§≤‡•ç‡§® ‡§Ø‡§π‡§æ‡§Å ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ó‡§∞ ‚ú®", () => { step = 2; step2(); })
        ]);
      });
    }

    function step2(){
      setBadge();
      subtitle.textContent = "‡§¶‡•ã‡§∏‡•ç‡§∞‡•ã ‡§∏‡§∞‡§™‡•ç‡§∞‡§æ‡§á‡§ú‚Ä¶ ‡§§‡§ø‡§Æ‡•ç‡§∞‡•ã ‡§≤‡§æ‡§ó‡§ø ‡§∏‡§æ‡§®‡•ã ‡§ï‡§µ‡§ø‡§§‡§æ üåô";
      popConfetti();

      const poem =
`Kaali,

‡§§‡§ø‡§Æ‡•Ä ‡§Æ‡•á‡§∞‡•ã ‡§Æ‡§®‡§ï‡•ã ‚Äú‡§∏‡§æ‡§∏‚Äù ‡§ú‡§∏‡•ç‡§§‡•ã,
‡§π‡§∞ ‡§™‡§≤ ‡§Ø‡§æ‡§¶ ‡§Ü‡§â‡§®‡•á ‚Äú‡§ñ‡§æ‡§∏‚Äù ‡§ú‡§∏‡•ç‡§§‡•ã‡•§

‡§§‡§ø‡§Æ‡•Ä ‡§¨‡§ø‡§®‡§æ ‡§¶‡§ø‡§® ‡§Ö‡§ß‡•Å‡§∞‡•ã,
‡§§‡§ø‡§Æ‡•Ä ‡§∏‡§Ç‡§ó‡•à ‡§∏‡§¨‡•à ‡§ï‡•Å‡§∞‡§æ ‡§™‡•Å‡§∞‡§æ‡•§

‡§§‡§ø‡§Æ‡•Ä ‡§Æ‡•á‡§∞‡•ã ‡§ñ‡•Å‡§∂‡•Ä‡§ï‡•ã ‡§ï‡§æ‡§∞‡§£,
‡§Æ‡•á‡§∞‡•ã ‡§Æ‡•Å‡§∏‡•ç‡§ï‡§æ‡§®‡§ï‡•ã ‡§∏‡§æ‡§∞‡•§`;

      typeText(poem, () => {
        renderButtons([
          makeButton("Last Surprise ‡§¨‡§æ‡§Å‡§ï‡•Ä ‡§õ üò≥üíò", () => { step = 3; step3(); })
        ]);
      });
    }

    function step3(){
      setBadge();
      subtitle.textContent = "‡§Ö‡§®‡•ç‡§§‡§ø‡§Æ ‡§∏‡§∞‡§™‡•ç‡§∞‡§æ‡§á‡§ú‚Ä¶ ‡§è‡§â‡§ü‡§æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§® üôà";
      popConfetti();

      const q =
`Kaali üíû

‡§Æ ‡§§‡§ø‡§Æ‡•Ä‡§≤‡§æ‡§à ‡§è‡§â‡§ü‡§æ ‡§ï‡•Å‡§∞‡§æ ‡§∏‡•ã‡§ß‡•ç‡§® ‡§ö‡§æ‡§π‡§®‡•ç‡§õ‡•Å‚Ä¶

‡§§‡§ø‡§Æ‡•Ä ‡§Æ‡•á‡§∞‡•ã Valentine ‡§¨‡§®‡•ç‡§õ‡•å? ‚ù§Ô∏è`;

      typeText(q, () => {
        // Yes / No (No dodges playfully)
        const yesBtn = makeButton("‡§π‡•Å‡§®‡•ç‡§õ ‚ù§Ô∏è", () => {
          popConfetti(260);
          typeText(
`‡§Ø‡•á‡§∏‡•ç‡§∏! üò≠‚ù§Ô∏è

Kaali, ‡§§‡§ø‡§Æ‡•Ä ‚Äú‡§π‡•Å‡§®‡•ç‡§õ‚Äù ‡§≠‡§®‡•ç‡§Ø‡•å ‡§≠‡§®‡•á
‡§Æ‡•á‡§∞‡•ã ‡§¶‡§ø‡§® ‡§Ö‡§ù‡•à ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§≠‡§Ø‡•ã‡•§

‡§Ö‡§¨ ‡§è‡§â‡§ü‡§æ ‡§∏‡§æ‡§®‡•ã ‡§™‡•ç‡§≤‡§æ‡§®:
‡§è‡§ï‡§¶‡§ø‡§® ‡§≠‡•á‡§ü‡•á‡§∞ ‡§Æ‡§ø‡§†‡•ã ‡§ï‡•Å‡§∞‡§æ ‡§ó‡§∞‡•å‡§Å,
‡§∞ ‡§§‡§ø‡§Æ‡•Ä‡§≤‡§æ‡§à ‡§∏‡§æ‡§®‡•ã ‚Äú‡§∏‡§∞‡§™‡•ç‡§∞‡§æ‡§á‡§ú‚Äù ‡§¶‡§ø‡§®‡•ç‡§õ‡•Å üéÅ

Love,
${YOUR_NAME} ‚ù§Ô∏è`
          );
          renderButtons([ makeButton("‡§´‡•á‡§∞‡§ø ‡§™‡§¢‡•ç‡§® ‡§ö‡§æ‡§π‡§®‡•ç‡§õ‡•å? üîÅ", () => location.reload()) ]);
        });

        const noBtn = makeButton("‡§Ö‡§≤‡§ø ‡§∏‡•ã‡§ö‡•å‡§Å üôà", () => {
          popConfetti(220);
          typeText(
`‡§†‡§ø‡§ï ‡§õ üòÑ

‡§Ö‡§≤‡§ø ‡§∏‡•ã‡§ö‡•ç‡§¶‡§æ ‡§™‡§®‡§ø ‡§π‡•Å‡§®‡•ç‡§õ‚Ä¶
‡§§‡§∞ ‡§è‡§â‡§ü‡§æ ‡§ï‡•Å‡§∞‡§æ ‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§õ‚Äî

‡§Æ ‡§§‡§ø‡§Æ‡•Ä‡§≤‡§æ‡§à ‡§Æ‡§æ‡§Ø‡§æ ‡§ó‡§∞‡•ç‡§®‡•á ‡§ï‡•Å‡§∞‡§æ ‡§ö‡§æ‡§π‡§ø‡§Å
‡§ï‡§π‡§ø‡§≤‡•ç‡§Ø‡•à ‡§¨‡§¶‡§≤‡§ø‡§Å‡§¶‡•à‡§®, Kaali ‚ù§Ô∏è

- ${YOUR_NAME}`
          );
          renderButtons([ makeButton("‡§´‡•á‡§∞‡§ø ‡§∏‡•Å‡§∞‡•Å ‡§ó‡§∞‡•å‡§Å üîÅ", () => location.reload()) ]);
        });
        noBtn.id = "noBtn";

        // Dodge effect when hovering the "no" button
        noBtn.addEventListener("mouseenter", () => {
          const dx = (Math.random() * 180) - 90;
          const dy = (Math.random() * 80) - 40;
          noBtn.style.transform = `translate(${dx}px, ${dy}px)`;
        });

        renderButtons([yesBtn, noBtn]);
      });
    }

    // Start button
    mainBtn.addEventListener("click", () => {
      mainBtn.disabled = true;
      step1();
    });
  </script>
</body>
</html>
